@if (isOpen) {
  <div class="modal-overlay" (click)="onCancel()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        @if (hasTransactions) {
          <h2>âš ï¸ CategorÃ­a con Transacciones</h2>
        } @else {
          <h2>ğŸ—‘ï¸ Confirmar EliminaciÃ³n</h2>
        }
        <button class="close-btn" (click)="onCancel()">&times;</button>
      </div>

      <div class="modal-body">
        @if (hasTransactions) {
          <div class="warning-message">
            <p class="warning-icon">âš ï¸</p>
            <p class="warning-text">
              La categorÃ­a <strong>{{ categoryName }}</strong> tiene 
              <strong>{{ transactionCount }}</strong> 
              {{ transactionCount === 1 ? 'transacciÃ³n asociada' : 'transacciones asociadas' }}.
            </p>
            <p class="info-text">
              No se puede eliminar esta categorÃ­a. En su lugar, serÃ¡ <strong>inactivada</strong> 
              para mantener la integridad de los datos histÃ³ricos.
            </p>
          </div>
        } @else {
          <div class="confirm-message">
            <p class="confirm-icon">ğŸ—‘ï¸</p>
            <p>
              Â¿EstÃ¡ seguro que desea eliminar la categorÃ­a 
              <strong>{{ categoryName }}</strong>?
            </p>
            <p class="info-text">Esta acciÃ³n no se puede deshacer.</p>
          </div>
        }
      </div>

      <div class="modal-footer">
        @if (hasTransactions) {
          <button class="btn btn-warning" (click)="onConfirm()">
            Inactivar CategorÃ­a
          </button>
        } @else {
          <button class="btn btn-danger" (click)="onConfirm()">
            Eliminar
          </button>
        }
        <button class="btn btn-secondary" (click)="onCancel()">
          Cancelar
        </button>
      </div>
    </div>
  </div>
}
